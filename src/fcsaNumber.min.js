/*! angular-fcsa-number (version 1.5.3) 2017-03-17 */
(function(){var a,b={}.hasOwnProperty;a=angular.module("fcsa-number",[]),a.directive("fcsaNumber",["fcsaNumberConfig",function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;return e=a.defaultOptions,f=function(a){var c,d,f,g;if(d=angular.copy(e),null!=a.options){f=a.$eval(a.options);for(c in f)b.call(f,c)&&(g=f[c],d[c]=g)}return d},g=function(a,b){return null==b&&(b="."),a.toString().replace(new RegExp("(\\d)\\"+b+"(\\d)","g"),"$1.$2")},k=function(a,b){var c;return null==b&&(b="."),c=g(a,b),!isNaN(parseFloat(c))&&isFinite(c)},j=function(a){return a<44||a>57||47===a},d=[0,8,13],i=function(a){return d.indexOf(a)===-1},h=function(a,b){return null==b&&(b="."),null!=a&&a.toString().split(b).length>2},m=function(a,b){var c,d;return null==b&&(b="."),c=a>0?"^-?\\d*\\.?\\d{0,"+a+"}$":"^-?\\d*$",d=new RegExp(c),function(a){return d.test(a)}},o=function(a){return function(b,c){return c<=a}},p=function(a){return function(b,c){return c>=a}},n=function(a,b){var c;return null==b&&(b="."),c=new RegExp("^-?\\d{0,"+a+"}(\\"+b+"\\d*)?$"),function(a){return c.test(a)}},l=function(a){var b;return b=[],null!=a.maxDecimals&&b.push(m(a.maxDecimals,a.decimalSeparator)),null!=a.max&&b.push(o(a.max)),null!=a.min&&b.push(p(a.min)),null!=a.maxDigits&&b.push(n(a.maxDigits,a.decimalSeparator)),function(c){var d,e,f,i;if(!k(c,a.decimalSeparator))return!1;if(h(c,a.decimalSeparator))return!1;for(f=Number(g(c,a.decimalSeparator)),d=e=0,i=b.length;0<=i?e<i:e>i;d=0<=i?++e:--e)if(!b[d](c,f))return!1;return!0}},c=function(a,b,c,d){var e,f,g,h,i,j,k,l;return null==b&&(b=","),null==c&&(c="."),null==d&&(d=null),a=a.replace(/\./g,c),g=new RegExp("^-?\\d+(?=\\"+c+".)",""),h=a.indexOf(c)===-1?"":a.replace(g,""),l=new RegExp("(\\"+c+"\\d+)$"),k=a.replace(l,""),e=k.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+b),null!==d&&(f=h?h.length-1:h)<d&&(i=d-f,j=new Array(i).join("0")+"0",h=h?h+j:c+j),""+e+h},{restrict:"A",require:"ngModel",scope:{options:"@fcsaNumber"},link:function(a,b,d,e){var h,k,m;if(k=f(a),h=l(k),m=new RegExp("\\"+k.thousandSeparator,"g"),e.$parsers.unshift(function(a){var b,c;return b=a.toString().replace(m,""),c=g(b,k.decimalSeparator),h(c)||!c?(e.$setValidity("fcsaNumber",!0),c):void e.$setValidity("fcsaNumber",!1)}),e.$formatters.push(function(a){return null==k.nullDisplay||a&&""!==a?null!=a&&h(a)?(e.$setValidity("fcsaNumber",!0),a=c(a.toString(),k.thousandSeparator,k.decimalSeparator,k.minDecimals),null!=k.prepend&&(a=""+k.prepend+a),null!=k.append&&(a=""+a+k.append),a):a:k.nullDisplay}),b.on("blur",function(){var a,b,c,d,f;if(null!=(f=e.$modelValue)&&h(f)){for(d=e.$formatters,b=0,c=d.length;b<c;b++)a=d[b],f=a(f);return e.$viewValue=f,e.$render()}}),b.on("focus",function(){var a;return a=b.val(),null!=k.prepend&&(a=a.replace(k.prepend,"")),null!=k.append&&(a=a.replace(k.append,"")),b.val(a.replace(m,"")),b[0].select()}),k.preventInvalidInput===!0)return b.on("keypress",function(a){if(j(a.which)&&i(a.which))return a.preventDefault()})}}}]),a.provider("fcsaNumberConfig",function(){var a;a={decimalSeparator:".",thousandSeparator:","},this.setDefaultOptions=function(b){return a=b},this.$get=function(){return{defaultOptions:a}}})}).call(this);